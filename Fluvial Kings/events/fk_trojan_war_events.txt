namespace = tw

#Trojan War Set-Up (on_startup)
character_event = {
	id = tw.1
	hide_window = yes
	is_triggered_only = yes 
	trigger = {
		has_landed_title = e_hellenic_pantheon
	}
	
	immediate = {
		161 = {
			add_province_modifier = {
				name = trojan_walls
				duration = -1
			}
		}
		c_2101002 = { #Helen of Troy
			add_trait = travelling
			move_character = c_2200000 #Pariya-muwas
		}
		any_independent_ruler = {
			limit = {
				war_with = c_2200000 #Pariya-muwas
			}
			set_character_flag = flag_achaean
			add_character_modifier = {
				modifier = trojan_war_wealth
				duration = -1
				hidden = yes
			}
			spawn_unit = {
				owner = THIS
				leader = THIS
				province = 161 #Troy
				home = THIS
				match_character = THIS
				attrition = 1.0
				disband_on_peace = yes
				maintenance_multiplier = 0
			}
			narrative_event = { id = tw.2 } #Greek Trojan War Event
		}
		any_independent_ruler = {
			limit = {
				war_with = c_2101000 #Menelaos
			}
			set_character_flag = flag_trojan
			add_character_modifier = {
				modifier = trojan_war_wealth
				duration = -1
				hidden = yes
			}
			spawn_unit = {
				owner = THIS
				leader = THIS
				province = 201 #Dardania
				home = THIS
				match_character = THIS
				attrition = 1.0
				disband_on_peace = yes
				maintenance_multiplier = 0
			}
			narrative_event = { id = tw.3 } #Trojan Trojan War Event
		}
		c_2102101 = {
			set_character_flag = flag_achaean
			add_character_modifier = {
				modifier = trojan_war_wealth
				duration = -1
				hidden = yes
			}
			spawn_unit = {
				owner = THIS
				leader = THIS
				province = 161 #Troy
				home = 125 #Lamia
				match_character = c_2102100 #Peleus
				attrition = 1.0
				disband_on_peace = yes
				maintenance_multiplier = 0
			}
			narrative_event = { id = tw.2 } #Greek Trojan War Event
		}
	}
}

#Greek Trojan War Event
narrative_event = {
	id = tw.2
	picture = GFX_evt_warrior_greek_gathering
	title = EVTTITLETW2
	desc = {
		trigger = {
			has_landed_title = d_achaea
		}
		text = EVTDESCATW2
	}
	desc = {
		trigger = {
			has_landed_title = d_lacedemonia
		}
		text = EVTDESCBTW2
	}
	desc = {
		trigger = {
			has_landed_title = d_salamis
		}
		text = EVTDESCCTW2
	}
	desc = {
		trigger = {
			has_landed_title = d_messenia
		}
		text = EVTDESDCTW2
	}
	desc = {
		trigger = {
			has_landed_title = k_krete
		}
		text = EVTDESCETW2
	}
	desc = {
		trigger = {
			has_landed_title = c_lamia
		}
		text = EVTDESCFTW2
	}
	desc = {
		trigger = {
			has_landed_title = d_ithake
		}
		text = EVTDESCGTW2
	}
	desc = {
		trigger = {
			has_landed_title = c_mases
		}
		text = EVTDESCHTW2
	}
	desc = {
		trigger = {
			NOR = {
				has_landed_title = d_achaea
				has_landed_title = c_lamia
				has_landed_title = d_lacedemonia
				has_landed_title = d_messenia
				has_landed_title = d_ithake
				has_landed_title = d_salamis
				has_landed_title = k_krete
				has_landed_title = c_mases
			}
		}
		text = EVTDESCTW2
	}
	hide_from = yes
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW2
		custom_tooltip = {
			text = EVTOPTATW2_TT
		}
	}
}

#Trojan Trojan War Event
narrative_event = {
	id = tw.3
	picture = GFX_evt_warrior_greek_gathering
	title = EVTTITLETW3
	desc = {
		trigger = {
			has_landed_title = d_wilusa
		}
		text = EVTDESCATW3
	}
	desc = {
		trigger = {
			has_landed_title = c_dardania
		}
		text = EVTDESCBTW3
	}
	desc = {
		trigger = {
			NOR = {
				has_landed_title = d_wilusa
				has_landed_title = c_dardania
			}
		}
		text = EVTDESCTW3
	}

	hide_from = yes
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW3
		custom_tooltip = {
			text = EVTOPTATW3_TT
		}
	}
}

# **************************Important Trojan War Events***********************

#Philoktetes gets bitten by a snake
character_event = {
	id = tw.4
	picture = GFX_left_on_lemnos
	desc = EVTDESCTW4
	trigger = {
		character = c_2102600 #Philoktetes
		NOT = {
			has_character_flag = bitten_by_snake
		}
		OR = {
			location = {
				owner = {
					any_war = {
						using_cb = trojan_war_cb
					}
					war_with = ROOT
				}
			}
			AND = {
				year = 2535
				month = 11
			}
			
		}
		any_war = {
			using_cb = trojan_war_cb
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTATW4
		set_character_flag = bitten_by_snake
		add_trait = infection
		add_trait = travelling
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = ROOT
					}
				}
			}
			character_event = { id = tw.5 } #Notification
		}
	}
}

#Notification
character_event = {
	id = tw.5
	desc = EVTDESCTW5
	picture = GFX_left_on_lemnos
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW5
	}
}

#Iólaos dies on the battlefield and becomes Protesilaos (on_combat_pulse)
character_event = {
	id = tw.6
	picture = GFX_iolaos_become_protesilaos
	desc = EVTDESCTW6
	is_triggered_only = yes
	trigger = {
		character = c_2102501 #Iólaos
		top_liege = {
			any_war = {
				using_cb = trojan_war_cb
				any_attacker = {
					character = PREVPREV
				}
			}
		}
	}
	
	option = {
		name = EVTOPTATW6
		set_name = Protesilaos
		death = {
			death_reason = death_battle
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = ROOT
					}
				}
			}
			character_event = { id = tw.7 } #Notification
		}
	}
}

#Notification
character_event = {
	id = tw.7
	picture = GFX_iolaos_become_protesilaos
	desc = EVTDESCTW7
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW7
	}
}

#Achilles raids the countryside
character_event = {
	id = tw.8
	picture = GFX_achilles_pillages
	desc = EVTDESCTW8
	trigger = {
		character = c_2102101 #Akhilleus
		NOT = {
			has_global_flag = raided_lurnessos
		}
		top_liege = {
			any_war = {
				using_cb = trojan_war_cb
				any_attacker = {
					character = PREVPREV
				}
			}
		}
		OR = {
			location = {
				owner = {
					has_landed_title = c_lurnessos
					any_war = {
						using_cb = trojan_war_cb
					}
				}
			}
			year = 2536
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTATW8
		wealth = 200
		set_global_flag = raided_lurnessos
		if = {
			limit = {
				c_2200702 = { #Briseis
					is_alive = yes
				}
			}
			add_consort = c_2200702 #Briseis
		}
		else = {
			create_character = {
				random_traits = yes
				age = 16
				female = yes
				culture = mysian
				religion = haianiluwi
				dynasty = none
			}
			add_consort = new_character
		}
		if = {
			limit = {
				c_2100900 = { #Agamemnon
					is_alive = yes
				}
			}
			c_2100900 = { #Agamemnon
				character_event = { id = tw.9 } #Agamemnon Receives Chryseis/Random Consort
			}
			if = {
				limit = {
					c_2100900 = { #Agamemnon
						at_location = 172 #Lurnessos
					}
				}
				c_2100900 = { #Agamemnon
					set_character_flag = at_lurnessos_desc
				}
			}
			else = {
				c_2100900 = { #Agamemnon
					set_character_flag = not_at_lurnessos_desc
				}
			}
		}
		else = {
			c_2101000 = { #Menelaos
				character_event = { id = tw.9 } #Agamemnon Receives Chryseis/Random Consort
			}
			if = {
				limit = {
					c_2101000 = { #Menelaos
						at_location = 172 #Lurnessos
					}
				}
				c_2101000 = { #Menelaos
					set_character_flag = at_lurnessos_desc
				}
			}
			else = {
				c_2101000 = { #Menelaos
					set_character_flag = not_at_lurnessos_desc
				}
			}
		}
	}
}

#Agamemnon Receives Chryseis/Random Consort
character_event = {
	id = tw.9
	picture = GFX_achilles_takes_chryseis
	desc = {
		text = EVTDESCATW9
		trigger = {
			has_character_flag = at_lurnessos_desc
		}
	}
	desc = {
		text = EVTDESCBTW9
		trigger = {
			has_character_flag = not_at_lurnessos_desc
		}
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW9
		if = {
			limit = {
				c_2200704 = { #Chryseis
					is_alive = yes
				}
			}
			c_2200704 = {
				set_character_flag = stolen_away
			}
			add_consort = c_2200704 #Chryseis
		}
		else = {
			create_character = {
				random_traits = yes
				age = 16
				female = yes
				culture = mysian
				religion = haianiluwi
				dynasty = none
			}
			add_consort = new_character
			new_character = {
				set_character_flag = stolen_away
			}
		}
		set_character_flag = agamemnon_received_consort
		# character_event = { id = tw.10 } #Chryses requests his daughter in exchange for gold
	}
}

#Menelaus receives Chryseis (set-up)
character_event = {
	id = tw.119
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_character_flag = agamemnon_received_consort
		NOT = {
			character = c_2101000 #Menelaos
		}
		any_consort = {
			has_character_flag = stolen_away
		}
		any_war = {
			using_cb = trojan_war_cb
			any_attacker = {
				character = ROOT
			}
		}
	}

	immediate = {
		c_2101000 = { #Menelaos
			character_event = { id = tw.120 }
		}
	}
}

#Menelaus receives Chryseis
character_event = {
	id = tw.120
	desc = EVTDESCTW120
	picture = GFX_achilles_takes_chryseis
	is_triggered_only = yes

	immediate = {
		random_character = {
			limit = {
				has_character_flag = stolen_away
			}
			save_event_target_as = fake_chryseis
		}
	}

	option = {
		name = EVTOPTATW120
		if = {
			limit = {
				c_2200704 = { #Chryseis
					is_alive = yes
				}
			}
			add_consort = c_2200704 #Chryseis
		}
		else = {
			add_consort = event_target:fake_chryseis
		}
	}
}

#Chryseis dies premature, Agamemnon requests Achilles give him Briseis (set-up)
character_event = {
	id = tw.121
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_character_flag = stolen_away
	}

	immediate = {
		consort = {
			character_event = { id = tw.122 }
		}
	}
}

#Chryseis dies premature, Agamemnon requests Achilles give him Briseis
character_event = {
	id = tw.122
	picture = GFX_briseis
	desc = EVTDESCTW122
	is_triggered_only = yes

	option = {
		name = EVTOPTATW122
		if = {
			limit = {
				c_2102101 = { #Akhilleus
					any_consort = {
						character = c_2200702 #Briseis
					}
				}
			}
			c_2200702 = { #Briseis
				remove_consort = c_2102101 #Akhilleus
			}
			add_consort = c_2200702 #Briseis
			set_character_flag = received_briseis
		}
		else_if = {
			limit = {
				c_2102101 = { #Akhilleus
					any_consort = {
						has_character_flag = fake_briseis
					}
				}
			}
			c_2102101 = { #Akhilleus
				random_consort = {
					limit = {
						has_character_flag = fake_briseis
					}
					save_event_target_as = fake_briseis
				}
				event_target:fake_briseis = {
					remove_consort = c_2102101 #Akhilleus
				}
			}
			add_consort = event_target:fake_briseis
			set_character_flag = received_briseis
		}
		else = {
			wealth = 200
			c_2102101 = { #Akhilleus
				wealth = -200
			}
		}
		c_2102101 = { #Akhilleus
			character_event = { id = tw.14 }
		}
	}
}

#Chryses requests his daughter in exchange for gold
character_event = {
	id = tw.10
	picture = GFX_achilles_takes_chryseis
	desc = {
		trigger = {
			c_2200705 = { #Chryses
				is_alive = yes
			}
			c_2200704 = { #Chryseis
				is_alive = yes
			}
		}
		text = EVTDESCATW10
	}
	desc = {
		trigger = {
			c_2200705 = { #Chryses
				is_alive = no
			}
			c_2200704 = { #Chryseis
				is_alive = yes
			}
		}
		text = EVTDESCBTW10
	}
	desc = {
		trigger = {
			c_2200704 = { #Chryseis
				is_alive = no
			}
		}
		text = EVTDESCCTW10
	}
	# is_triggered_only = yes
	trigger = {
		has_character_flag = agamemnon_received_consort
		any_consort = {
			has_character_flag = stolen_away
		}
		NOT = {
			has_global_flag = request_from_chryses
		}
		year = 2536
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = request_from_chryses
	}
	
	option = { #Yes
		name = EVTOPTATW10
		trigger = {
			ai = no
		}
		if = {
			limit = {
				c_2200705 = { #Chryses
					is_alive = yes
				}
				c_2200704 = { #Chryseis
					is_alive = yes
				}
			}
			c_2200705 = { #Chryses
				wealth = -100
			}
			wealth = 100
		}
		else = {
			wealth = 100
		}
		c_lurnessos = {
			owner = {
				save_event_target_as = lurnessos_owner
			}
		}
		any_consort = {
			limit = {
				has_character_flag = stolen_away
			}
			remove_consort = ROOT
			move_character = event_target:lurnessos_owner
			clr_character_flag = stolen_away
		}
		if = {
			limit = {
				c_2102101 = { #Akhilleus
					any_consort = {
						character = c_2200702 #Briseis
					}
				}
			}
			c_2200702 = { #Briseis
				remove_consort = c_2102101 #Akhilleus
			}
			add_consort = c_2200702 #Briseis
			set_character_flag = received_briseis
		}
		else_if = {
			limit = {
				c_2102101 = { #Akhilleus
					any_consort = {
						has_character_flag = fake_briseis
					}
				}
			}
			c_2102101 = { #Akhilleus
				random_consort = {
					limit = {
						has_character_flag = fake_briseis
					}
					save_event_target_as = fake_briseis
				}
				event_target:fake_briseis = {
					remove_consort = c_2102101 #Akhilleus
				}
			}
			add_consort = event_target:fake_briseis
			set_character_flag = received_briseis
		}
		else = {
			wealth = 200
			c_2102101 = { #Akhilleus
				wealth = -200
			}
		}
		c_2102101 = { #Akhilleus
			character_event = { id = tw.14 }
		}
	}
	option = { #No
		name = EVTOPTBTW10
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = ROOT
					}
				}
				in_command = yes
			}
			character_event = { id = tw.11 } #A Plague strikes the Achaeans
		}
		character_event = { id = tw.11 } #A Plague strikes the Achaeans
		character_event = { id = tw.12 days = 9 } #Agamemnon is told he must return Chryseis/Random consort
	}
}

#A Plague strikes the Achaeans
character_event = {
	id = tw.11
	picture = GFX_chryseis_returned
	desc = EVTDESCTW11
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW11
		add_trait = malaise
		add_trait = fever
		add_trait = cramps
	}
}

#Agamemnon is told he must return Chryseis/Random consort
character_event = {
	id = tw.12
	picture = GFX_chryseis_returned
	desc = EVTDESCTW12
	is_triggered_only = yes
	
	option = { #Yes, but give me Briseis/gold, Akhilleus
		name = EVTOPTATW12
		custom_tooltip = {
			any_playable_ruler = {
				limit = {
					any_war = {
						using_cb = trojan_war_cb
						any_attacker = {
							character = ROOT
						}
					}
				}
				remove_trait = malaise
				remove_trait = fever
				remove_trait = cramps
			}
			remove_trait = malaise
			remove_trait = fever
			remove_trait = cramps
		}
		c_lurnessos = {
			owner = {
				save_event_target_as = lurnessos_owner
			}
		}
		any_consort = {
			limit = {
				has_character_flag = stolen_away
			}
			remove_consort = ROOT
			move_character = event_target:lurnessos_owner
			clr_character_flag = stolen_away
		}
		if = {
			limit = {
				c_2102101 = { #Akhilleus
					any_consort = {
						character = c_2200702 #Briseis
					}
				}
			}
			c_2200702 = { #Briseis
				remove_consort = c_2102101 #Akhilleus
			}
			add_consort = c_2200702 #Briseis
			set_character_flag = received_briseis
		}
		else_if = {
			limit = {
				c_2102101 = { #Akhilleus
					any_consort = {
						has_character_flag = fake_briseis
					}
				}
			}
			c_2102101 = { #Akhilleus
				random_consort = {
					limit = {
						has_character_flag = fake_briseis
					}
					save_event_target_as = fake_briseis
				}
				event_target:fake_briseis = {
					remove_consort = c_2102101 #Akhilleus
				}
			}
			add_consort = event_target:fake_briseis
			set_character_flag = received_briseis
		}
		else = {
			wealth = 200
			c_2102101 = { #Akhilleus
				wealth = -200
			}
		}
		c_2102101 = { #Akhilleus
			character_event = { id = tw.14 }
		}
	}
}

#Chryseis dies, plague removed
# character_event = {
	# id = tw.13
	# is_triggered_only = yes
	# trigger = {
		# has_character_flag = stolen_away
	# }
	
	# immediate = {
		# any_playable_ruler = {
			# limit = {
				# any_war = {
					# using_cb = trojan_war_cb
					# any_attacker = {
						# character = ROOT
					# }
				# }
			# }
			# remove_trait = malaise
			# remove_trait = fever
			# remove_trait = cramps
		# }
	# }
# }

#Akhilleus is forced to give Agamemnon Briseis/Gold
character_event = {
	id = tw.14
	picture = GFX_briseis
	desc = {
		text = EVTDESCATW14
		trigger = {
			FROM = {
				has_character_flag = received_briseis
			}
		}
	}
	desc = {
		text = EVTDESCBTW14
		trigger = {
			NOT = {
				FROM = {
					has_character_flag = received_briseis
				}
			}
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW14
		custom_tooltip = {
			text = EVTOPTATW14_TT #You ask your mother to speak to Zeus, so the Achaeans will know how much they need him
		}
		add_trait = wroth
		add_trait = travelling
		add_rival = FROM
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = ROOT
					# }
				}
			}
			character_event = { id = tw.15 } #Wrath of Akhilleus
		}
		FROM = {
			character_event = { id = tw.16 days = 2 } #Agamemnon is told to assault Troy by Zeus in a dream, but tests the resolve of the Greeks first
			character_event = { id = tw.24 days = 5 } #Agamemnon sends Odysseus, Ajax, and Phoenix to Achilles
		}
	}
}

#Wrath of Akhilleus
character_event = {
	id = tw.15
	picture = GFX_wrath_of_akhilleus
	title = EVTTITLETW15
	desc = EVTDESCTW15
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW15
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW15
		}
	}
}

#Agamemnon is told to assault Troy by Zeus in a dream, but tests the resolve of the Greeks first
character_event = {
	id = tw.16
	picture = GFX_wrath_of_akhilleus
	desc = {
		trigger = {
			c_2102300 = { #Odysseus
				is_alive = yes
			}
		}
		text = EVTDESCATW16
	}
	desc = {
		trigger = {
			c_2102300 = { #Odysseus
				is_alive = no
			}
		}
		text = EVTDESCBTW16
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW16
	}
}

#Paris attempts to set up a duel
character_event = {
	id = tw.17
	picture = GFX_achilles_duels_hector
	desc = EVTDESCTW17
	trigger = {
		character = c_2200004 #Paris
		NOT = {
			has_global_flag = duel_paris_menelaus
		}
		is_incapable = no
		prisoner = no
		c_2101000 = { #Menelaos
			at_location = 161 #Troy
		}
		c_2200004 = { #Paris
			at_location = 161 #Troy
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTATW17
		set_global_flag = duel_paris_menelaus
		c_2101000 = { #Menelaos
			letter_event = { id = tw.18 } #Menelaos receives a letter for Paris to duel him
		}
	}
	option = {
		name = EVTOPTBTW17
		trigger = {
			ai = no
		}
	}
}

#Menelaos receives a letter for Paris to duel him
letter_event = {
	id = tw.18
	picture = GFX_achilles_duels_hector
	desc = EVTDESCTW18
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW18
		FROM = { save_event_target_as = combatant_1 } #the person issuing the duel...
		save_event_target_as = combatant_2 #the target of the duel...

		apply_degree_of_dishonorable_duel_effect = yes #checks a bunch of age and health statuses...
		apply_any_applicable_harsh_penalties_effect = yes #if your target is someone 
		FROM = {
			set_character_flag = paris_menelaos_duel
		}
		set_character_flag = paris_menelaos_duel
		FROM = {
			pacifists_lose_piety_effect = yes
			add_character_modifier = {
				modifier = recent_duel_timer
				duration = 90
				hidden = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = HFP.10095 } #Duel evaluation (hidden) + result event as follow-up.
		}
		set_character_flag = cannot_refuse_duel
	}
	option = {
		name = EVTOPTBTW18
		trigger = {
			ai = no
		}
		FROM = {
			character_event = { id = HFP.10097 }
		}
	}
}

#Menelaus dies of a duel set-up (on_death)
character_event = {
	id = tw.19
	hide_window = yes
	is_triggered_only = yes 
	
	trigger = {
		character = c_2101000 #Menelaos
		any_war = {
			using_cb = trojan_war_cb
		}
		death_reason = death_duel
	}
	
	immediate = {
		any_playable_ruler = {
			narrative_event = { id = tw.85 } #Menelaus dies of a duel
		}
	}
}

#Menelaus dies of a duel
narrative_event = {
	id = tw.85
	picture = GFX_achilles_duels_hector
	title = EVTTITLETW85
	desc = EVTDESCTW85
	is_triggered_only = yes 

	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW85
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW85
		}
		custom_tooltip = {
			text = EVTOPTATW85_TT
		}
	}
}

#Menelaus dies in battle set-up (on_death)
character_event = {
	id = tw.86
	hide_window = yes
	is_triggered_only = yes 
	
	trigger = {
		character = c_2101000 #Menelaos
		any_war = {
			using_cb = trojan_war_cb
		}
		death_reason = death_battle
	}
	
	immediate = {
		any_playable_ruler = {
			narrative_event = { id = tw.87 } #Menelaus dies in battle
		}
	}
}

#Menelaus dies in battle
narrative_event = {
	id = tw.87
	picture = GFX_achilles_duels_hector
	title = EVTTITLETW87
	desc = EVTDESCTW87
	is_triggered_only = yes 

	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW87
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW87
		}
		custom_tooltip = {
			text = EVTOPTATW87_TT
		}
	}
}

#Menelaus dies (generic) (on_death)
character_event = {
	id = tw.88
	hide_window = yes
	is_triggered_only = yes 
	
	trigger = {
		character = c_2101000 #Menelaos
		any_war = {
			using_cb = trojan_war_cb
		}
		NOR = {
			death_reason = death_battle
			death_reason = death_duel
		}
	}
	
	immediate = {
		any_playable_ruler = {
			narrative_event = { id = tw.89 } #Menelaus dies in battle
		}
	}
}

#Menelaus dies (generic)
narrative_event = {
	id = tw.89
	picture = GFX_achilles_duels_hector
	title = EVTTITLETW89
	desc = EVTDESCTW89
	is_triggered_only = yes 

	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW89
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW89
		}
		custom_tooltip = {
			text = EVTOPTATW89_TT
		}
	}
}

#Menelaos is saved by Athene
character_event = {
	id = tw.20
	picture = GFX_wrath_of_akhilleus
	desc = EVTDESCTW20
	portrait = 1100147
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW20
		custom_tooltip = {
			text = EVTOPTATW20_TT
		}
		c_2101000 = { #Menelaos
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
		c_2200004 = { #Paris
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
		if = {
			limit = {
				c_2201300 = { #Pandarus
					is_alive = yes
				}
			}
			character_event = { id = tw.22 days = 5 } #Pandarus breaks the truce
		}
		else = {
			character_event = { id = tw.23 days = 5 } #Generic Trojan breaks the truce
		}
	}
}

#Paris is saved by Aphrodite
character_event = {
	id = tw.21
	picture = GFX_wrath_of_akhilleus
	title = EVTTITLETW21
	desc = EVTDESCTW21
	portrait = 1100155
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW21
		custom_tooltip = {
			text = EVTOPTATW21_TT
		}
		c_2101000 = { #Menelaos
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
		c_2200004 = { #Paris
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
		if = {
			limit = {
				c_2201300 = { #Pandarus
					is_alive = yes
				}
			}
			c_2101000 = { #Menelaos
				character_event = { id = tw.22 days = 5 } #Pandarus breaks the truce
			}
		}
		else = {
			c_2101000 = { #Menelaos
				character_event = { id = tw.23 days = 5 } #Generic Trojan breaks the truce
			}
		}
	}
}

#Pandarus breaks the truce
character_event = {
	id = tw.22
	picture = GFX_wrath_of_akhilleus
	title = EVTTITLETW22
	desc = EVTDESCTW22
	portrait = 2201300
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW22
		c_2101000 = { #Menelaos
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
		c_2200004 = { #Paris
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
	}
}

#Generic Trojan breaks the truce
character_event = {
	id = tw.23
	picture = GFX_wrath_of_akhilleus
	title = EVTTITLETW23
	desc = EVTDESCTW23
	hide_from = yes
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW23
		c_2101000 = { #Menelaos
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
		c_2200004 = { #Paris
			clr_character_flag = paris_menelaos_duel
			clr_character_flag = cannot_refuse_duel
		}
	}
}

#Agamemnon sends Odysseus, Ajax, and Phoenix to Achilles
character_event = {
	id = tw.24
	picture = GFX_wrath_of_akhilleus
	desc = EVTDESCTW24
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW24
		c_2102101 = { #Akhilleus
			character_event = { id = tw.25 } #Achilles receives the embassy
		}
	}
}

#Achilles receives the embassy
character_event = {
	id = tw.25
	picture = GFX_wrath_of_akhilleus
	desc = EVTDESCTW25
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW25
		trigger = {
			c_2101619 = { #Patroclus
				is_alive = yes
			}
		}
		c_2101619 = { #Patroclus
			character_event = { id = tw.28 } #Patroclus begs Achilles to lend him his armor
		}
		FROM = {
			character_event = { id = tw.26 } #Achilles says no
		}
	}
	option = {
		name = EVTOPTBTW25
		trigger = {
			OR = {
				ai = no
				c_2101619 = { #Patroclus
					is_alive = no
				}
			}
		}
		if = {
			limit = {
				FROM = {
					any_consort = {
						character = c_2200702 #Briseis
					}
				}
			}
			c_2200702 = { #Briseis
				remove_consort = FROM
			}
			add_consort = c_2200702 #Briseis
		}
		else_if = {
			limit = {
				FROM = {
					any_consort = {
						has_character_flag = fake_briseis
					}
				}
			}
			FROM = {
				random_consort = {
					limit = {
						has_character_flag = fake_briseis
					}
					save_event_target_as = fake_briseis
				}
				event_target:fake_briseis = {
					remove_consort = FROM
				}
			}
			add_consort = event_target:fake_briseis
		}
		wealth = 100
		remove_trait = travelling
		remove_trait = wroth
		FROM = {
			character_event = { id = tw.27 } #Achilles says yes
		}
	}
}

#Achilles says no
character_event = {
	id = tw.26
	picture = GFX_wrath_of_akhilleus
	desc = EVTDESCTW26
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW26
	}
}

#Achilles says yes
character_event = {
	id = tw.27
	picture = GFX_wrath_of_akhilleus
	desc = EVTDESCTW27
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW27
		set_global_flag = achilles_return
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.33 } #Return of Achilles
		}
	}
}

#Patroclus begs Achilles to lend him his armor
character_event = {
	id = tw.28
	picture = GFX_patroclus_armor
	desc = EVTDESCTW28
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW28
		c_2102101 = { #Akhilleus
			character_event = { id = tw.29 } #Achilles receives Patroclus' plea
		}
	}
}

#Achilles receives Patroclus' plea
character_event = {
	id = tw.29
	picture = GFX_patroclus_armor
	desc = EVTDESCTW29
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW29
		FROM = {
			character_event = { id = tw.30 } #Patroclus is allowed to wear the armor
		}
	}
}

#Patroclus is allowed to wear the armor
character_event = {
	id = tw.30
	picture = GFX_patroclus_armor
	desc = EVTDESCTW30
	is_triggered_only = yes 
	
	option = {
		name = EVTOPTATW30
		set_character_flag = patroclus_as_achilles
		FROM = {
			random_artifact = {
				limit = {
					has_artifact_flag = achilles_armor
				}
				transfer_artifact = {
					to = ROOT
					from = FROM
				}
			}
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.90 } #Return of Achilles?
		}
	}
}

#Return of Achilles?
character_event = {
	id = tw.90
	picture = GFX_return_of_achilles
	title = EVTTITLETW90
	desc = EVTDESCTW90
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW90
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW90
		}
	}
}

#Generic Trojan kills Patroclus (failsafe)
character_event = {
	id = tw.112
	hide_window = yes
	trigger = {
		has_landed_title = e_hellenic_pantheon
		c_2200002 = { #Hector
			is_alive = no
		}
		year = 2536
		month = 9
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_global_flag = death_of_patroclus
		c_2101619 = { #Patroclus
			unsafe_destroy_artifact = armor_achilles
			death = {
				death_reason = death_battle
			}
		}
		c_2102101 = { #Akhilleus
			character_event = { id = tw.32 } #Achilles hears of Patroclus' death
		}
	}
}

#Patroclus dies from other causes after given the armor (on_death) (failsafe)
character_event = {
	id = tw.113
	picture = GFX_patroclus_dies
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		character = c_2101619 #Patroclus
		has_character_flag = patroclus_as_achilles
		NOT = {
			has_global_flag = death_of_patroclus
		}
	}
	
	immediate = {
		set_global_flag = death_of_patroclus
		c_2101619 = { #Patroclus
			unsafe_destroy_artifact = armor_achilles
		}
		c_2102101 = { #Akhilleus
			character_event = { id = tw.32 } #Achilles hears of Patroclus' death
		}
	}
}

#Hector kills Patroclus
character_event = {
	id = tw.31
	picture = GFX_patroclus_dies
	desc = EVTDESCTW31
	trigger = {
		character = c_2200002 #Hector
		is_incapable = no
		prisoner = no
		top_liege = {
			any_war = {
				using_cb = trojan_war_cb
				any_defender = {
					character = PREVPREV
				}
			}
		}
		c_2101619 = { #Patroclus
			is_alive = yes
		}
		OR = {
			AND = {
				year = 2536
				month = 9
			}
			c_2101619 = { #Patroclus
				at_location = c_2200002 #Hector
				has_character_flag = patroclus_as_achilles
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = EVTOPTATW31
		set_global_flag = death_of_patroclus
		c_2101619 = {
			random_artifact = {
				limit = {
					has_artifact_flag = achilles_armor
				}
				transfer_artifact = {
					to = ROOT
					from = PREV
				}
			}
			death = {
				death_reason = death_battle
				killer = ROOT
			}
		}
		c_2102101 = { #Akhilleus
			character_event = { id = tw.32 } #Achilles hears of Patroclus' death
		}
	}
}

#Achilles hears of Patroclus' death
character_event = {
	id = tw.32
	picture = GFX_achilles_shield
	title = EVTTITLETW32
	desc = EVTDESCTW32
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW32
		custom_tooltip = {
			text = EVTOPTATW32_TT
		}
		add_artifact = shield_achilles
		add_artifact = armor_achilles_2
		remove_trait = travelling
		set_global_flag = achilles_return
		remove_rival = c_2100900 #Agamemnon
		remove_rival = c_2101000 #Menelaos
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.33 } #Return of Achilles
		}
	}
}

#Return of Achilles
character_event = {
	id = tw.33
	picture = GFX_return_of_achilles
	title = EVTTITLETW33
	desc = {
		trigger = {
			has_global_flag = death_of_patroclus
		}
		text = EVTDESCATW33
	}
	desc = {
		trigger = {
			NOT = {
				has_global_flag = death_of_patroclus
			}
		}
		text = EVTDESCBTW33
	}
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW33
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW33
		}
	}
}

#Achilles gets back Briseis, but is indifferent
character_event = {
	id = tw.34
	picture = GFX_return_of_achilles
	desc = {
		trigger = {
			c_2100900 = { #Agamemnon
				at_location = 161 #Troy
			}
		}
		text = EVTDESCATW34
	}
	desc = {
		trigger = {
			NOT = {
				c_2100900 = { #Agamemnon
					at_location = 161 #Troy
				}
			}
		}
		text = EVTDESCBTW34
	}
	trigger = {
		at_location = 161 #Troy
		character = c_2102101 #Achilles
		has_global_flag = achilles_return
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTATW34
		if = {
			limit = {
				c_2100900 = { #Agamemnon
					any_consort = {
						character = c_2200702 #Briseis
					}
				}
			}
			c_2200702 = { #Briseis
				remove_consort = c_2100900 #Agamemnon
			}
			add_consort = c_2200702 #Briseis
		}
		else_if = {
			limit = {
				c_2100900 = { #Agamemnon
					any_consort = {
						has_character_flag = fake_briseis
					}
				}
			}
			c_2100900 = { #Agamemnon
				random_consort = {
					limit = {
						has_character_flag = fake_briseis
					}
					save_event_target_as = fake_briseis
				}
				event_target:fake_briseis = {
					remove_consort = c_2100900 #Agamemnon
				}
			}
			add_consort = event_target:fake_briseis
		}
		wealth = 100
	}
}

#Sets 'Achilles will die' flag if Hector is dead (failsafe)
character_event = {
	id = tw.114
	hide_window = yes
	trigger = {
		has_landed_title = e_hellenic_pantheon
		c_2200002 = { #Hector
			is_alive = no
		}
		has_global_flag = achilles_return
		year = 2536
		month = 11
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_global_flag = achilles_will_die
	}
}

#Hector duels Achilles
character_event = {
	id = tw.35
	picture = GFX_achilles_duels_hector
	desc = EVTDESCTW35
	trigger = {
		character = c_2200002 #Hector
		has_global_flag = achilles_return
		is_incapable = no
		prisoner = no
		OR = {
			AND = {
				year = 2536
				month = 11
			}
			c_2200002 = { #Hector
				at_location = c_2102101 #Akhilleus
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTATW35
		c_2102101 = { #Achilles
			character_event = { id = tw.36 } #Hector rushes to duel Achilles
		}
	}
}

#Hector rushes to duel Achilles
character_event = {
	id = tw.36
	picture = GFX_achilles_duels_hector
	desc = EVTDESCTW36
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW36
		FROM = { save_event_target_as = combatant_1 } #the person issuing the duel...
		save_event_target_as = combatant_2 #the target of the duel...

		apply_degree_of_dishonorable_duel_effect = yes #checks a bunch of age and health statuses...
		apply_any_applicable_harsh_penalties_effect = yes #if your target is someone 
		FROM = {
			set_character_flag = duel_hector_achilles
		}
		set_character_flag = duel_hector_achilles
		FROM = {
			pacifists_lose_piety_effect = yes
			add_character_modifier = {
				modifier = recent_duel_timer
				duration = 90
				hidden = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = HFP.10095 } #Duel evaluation (hidden) + result event as follow-up.
		}
		set_character_flag = cannot_refuse_duel
	}
}

#Hector dies in duel with Achilles
character_event = {
	id = tw.37
	picture = GFX_achilles_duels_hector
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		character = c_2200002 #Hector
		has_character_flag = duel_hector_achilles
	}
	
	immediate = {
		c_2102101 = { #Achilles
			clr_character_flag = cannot_refuse_duel
			long_character_event = { id = tw.38 } #Achilles is reminded by Hector that he will die in combat, and Achilles drags his body around
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			narrative_event = { id = tw.91 } #Death of Hector
		}
	}
}

#Death of Hector
narrative_event = {
	id = tw.91
	picture = GFX_death_of_hector
	title = EVTTITLETW91
	desc = EVTDESCTW91
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW91
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW91
		}
	}
}

#Achilles is reminded by Hector that he will die in combat, and Achilles drags his body around
long_character_event = {
	id = tw.38
	picture = GFX_death_of_hector
	desc = EVTDESCTW38
	is_triggered_only = yes

	option = {
		name = EVTOPTATW38
		set_global_flag = achilles_will_die
		character_event = { id = tw.39 } #Ghost of Patroclus asks for funeral games to be held
		c_2200000 = { #Pariya-muwas
			long_character_event = { id = tw.41 } #Pariya-muwas goes to Achilles to request the body of Hector
		}		
	}
}

#Ghost of Patroclus asks for funeral games to be held
character_event = {
	id = tw.39
	picture = GFX_death_of_achilles
	desc = EVTDESCTW39
	is_triggered_only = yes
	portrait = 2101619

	option = {
		name = EVTOPTATW39
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = PREVPREV
					}
				}
				at_location = 161 #Troy
			}
			character_event = { id = tw.40 } #Achaeans in Troy hold funeral games at the camp
		}
		character_event = { id = tw.40 } #Achaeans in Troy hold funeral games at the camp		
	}
}

#Achaeans in Troy hold funeral games at the camp
character_event = {
	id = tw.40
	picture = GFX_death_of_achilles
	title = EVTTITLETW40
	desc = {
		trigger = {
			character = c_2102101 #Achilles
		}
		text = EVTDESCATW40
	}
	desc = {
		trigger = {
			NOT = {
				character = c_2102101 #Achilles
			}
		}
		text = EVTDESCBTW40
	}
	is_triggered_only = yes

	option = {
		name = EVTOPTATW40
	}
}

#Pariya-muwas goes to Achilles to request the body of Hector
long_character_event = {
	id = tw.41
	picture = GFX_priam_asks_for_body
	title = EVTTITLETW41
	desc = EVTDESCTW41
	is_triggered_only = yes

	option = {
		name = EVTOPTATW41
		c_2102101 = { #Achilles
			character_event = { id = tw.42 days = 7 } #Pariya-muwas arrives at Achilles' camp
		}
	}
}

#Pariya-muwas arrives at Achilles' camp
character_event = {
	id = tw.42
	picture = GFX_priam_asks_for_body
	title = EVTTITLETW42
	desc = EVTDESCTW42
	is_triggered_only = yes

	option = {
		name = EVTOPTATW42
		remove_trait = wroth
		FROM = {
			character_event = { id = tw.43 } #Achilles agrees
		}
	}
	option = {
		name = EVTOPTBTW42
		trigger = {
			ai = no
		}
		FROM = {
			character_event = { id = tw.44 } #Achilles says no
		}
	}
}

#Achilles agrees
character_event = {
	id = tw.43
	picture = GFX_priam_asks_for_body
	title = EVTTITLETW43
	desc = EVTDESCTW43
	is_triggered_only = yes

	option = {
		name = EVTOPTATW43
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_defender = {
						character = PREVPREV
					}
				}
			}
			character_event = { id = tw.45 } #Hector is buried
		}
		character_event = { id = tw.45 } #Hector is buried
	}
}

#Achilles says no
character_event = {
	id = tw.44
	picture = GFX_priam_asks_for_body
	title = EVTTITLETW44
	desc = EVTDESCTW44
	is_triggered_only = yes

	option = {
		random = {
			chance = 50
			add_trait = depressed
		}
	}
}

#Hector is buried
character_event = {
	id = tw.45
	picture = GFX_priam_asks_for_body
	title = EVTTITLETW45
	desc = EVTDESCTW45
	is_triggered_only = yes

	option = {
		name = EVTOPTATW45
	}
}

#Achilles is killed by a generic Trojan assisted by Apollo (failsafe)
character_event = {
	id = tw.115
	hide_window = yes
	trigger = {
		has_landed_title = e_hellenic_pantheon
		c_2200004 = { #Paris
			OR = {
				is_alive = no
				is_incapable = yes
				prisoner = yes
			}
		}
		year = 2537
		month = 6
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		c_2102101 = { #Achilles
			death = {
				death_reason = death_battle
			}
			hidden_tooltip = {
				any_artifact = {
					limit = {
						has_artifact_flag = achilles
					}
					transfer_artifact = {
						to = c_1100146 #Zeus
						from = PREV
					}
				}
			} 
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.92 } #Death of Achilles
		}
	}
}

#Paris kills Achilles
character_event = {
	id = tw.46
	picture = GFX_death_of_achilles
	desc = EVTDESCTW46
	portrait = 1100149
	trigger = {
		had_global_flag = {
			flag = achilles_will_die
			days = 8
		}
		year = 2537
		character = c_2200004 #Paris
		is_incapable = no
		prisoner = no
		OR = {
			c_2102101 = { #Achilles
				at_location = c_2200004 #Paris
			}
			AND = {
				year = 2537
				month = 6
			}
		}
		top_liege = {
			any_war = {
				using_cb = trojan_war_cb
				any_defender = {
					character = PREVPREV
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = EVTOPTATW46
		c_2102101 = { #Achilles
			death = {
				death_reason = death_battle
				killer = ROOT
			}
			hidden_tooltip = {
				any_artifact = {
					limit = {
						has_artifact_flag = achilles
					}
					transfer_artifact = {
						to = c_1100146 #Zeus
						from = PREV
					}
				}
			} 
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.92 } #Death of Achilles
		}
	}
}

#Death of Achilles
character_event = {
	id = tw.92
	picture = GFX_death_of_achilles
	title = EVTTITLETW92
	desc = EVTDESCTW92
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW92
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW92
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = end_of_trojan_war
				}
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = PREVPREV
					}
				}
			}
			character_event = { id = tw.47 } #Achaeans hold funeral games for Achilles
		}
	}
}

#Achaeans hold funeral games for Achilles
character_event = {
	id = tw.47
	picture = GFX_death_of_achilles
	title = EVTTITLETW47
	desc = EVTDESCTW47
	is_triggered_only = yes

	option = {
		name = EVTOPTATW47
		if = {
			limit = {
				NOT = {
					has_global_flag = end_of_trojan_war
				}
				OR = {
					character = c_2101000 #Menelaos
					character = c_2100900 #Agamemnon
				}
			}
			if = {
				limit = {
					c_2200018 = { #Helenus
						is_alive = yes
					}
				}
				character_event = { id = tw.51 days = 3 } #Helenus is tortured to reveal win condition 
			}
			else = {
				character_event = { id = tw.52 days = 3 } #Generic Trojan is tortured to reveal win condition 
			}
			if = {
				limit = {
					c_2100900 = { #Agamemnon
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
				}
				character_event = { id = tw.53 days = 4 } #Relevent people are sent to fetch the required items
			}
			else = {
				c_2101000 = { #Menelaos
					character_event = { id = tw.53 days = 4 } #Relevent people are sent to fetch the required items
				}
			}
		}
		if = {
			limit = {
				c_2100701 = { #Ajax
					is_alive = yes
				}
				c_2102300 = { #Odysseus
					is_alive = yes
				}
			}
			c_2100701 = { #Ajax
				character_event = { id = tw.48 days = 2 } #Odysseus and Ajax argue over Achilles' armor
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.48 days = 2 } #Odysseus and Ajax argue over Achilles' armor
			}
		}
		else_if = {
			limit = {
				c_2100701 = { #Ajax
					is_alive = yes
				}
			}
			c_2100701 = { #Ajax
				character_event = { id = tw.49 }
			}
		}
		else_if = {
			limit = {
				c_2102300 = { #Odysseus
					is_alive = yes
				}
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.49 }
			}
		}
		else_if = {
			limit = {
				c_2101200 = { #Diomedes
					is_alive = yes
				}
			}
			c_2101200 = { #Diomedes
				character_event = { id = tw.49 }
			}
		}
		else = {
			random_independent_ruler = {
				limit = {
					has_landed_title = c_lamia
				}
				character_event = { id = tw.49 }
			}
		}
	}
}

#Odysseus and Ajax argue over Achilles' armor
character_event = {
	id = tw.48
	picture = GFX_ajax_and_odysseus
	title = EVTTITLETW48
	desc = {
		trigger = {
			character = c_2100701 #Ajax
		}
		text = EVTDESCATW48
	}
	desc = {
		trigger = {
			character = c_2102300 #Odysseus
		}
		text = EVTDESCBTW48
	}
	is_triggered_only = yes

	option = {
		name = {
			trigger = {
				character = c_2100701 #Ajax
			}
			text = EVTOPTAATW48
		}
		name = {
			trigger = {
				character = c_2102300 #Odysseus
			}
			text = EVTOPTABTW48
		}
		if = {
			limit = {
				character = c_2102300 #Odysseus
			}
			character_event = { id = tw.49 } #Receive the armor
		}
		if = {
			limit = {
				character = c_2100701 #Ajax
			}
			character_event = { id = tw.50 } #Don't Receive the armor
		}
	}
}

#Receive the armor
character_event = {
	id = tw.49
	picture = GFX_ajax_and_odysseus
	title = EVTTITLETW49
	desc = EVTDESCTW49
	is_triggered_only = yes

	option = {
		name = EVTOPTATW49
		hidden_tooltip = {
			c_1100146 = { #Zeus
				any_artifact = {
					limit = {
						has_artifact_flag = achilles
					}
					transfer_artifact = {
						to = ROOT
						from = PREV
					}
				}
			}
		}
	}
}

#Don't Receive the armor
character_event = {
	id = tw.50
	picture = GFX_ajax_and_odysseus
	title = EVTTITLETW50
	desc = EVTDESCTW50
	is_triggered_only = yes

	option = {
		name = EVTOPTATW50
		death = {
			death_reason = death_suicide
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = PREVPREV
					}
				}
			}
			character_event = { id = tw.117 } #Suicide over armor
		}
	}
	option = {
		trigger = {
			ai = no
		}
		name = EVTOPTBTW50
	}
}

#Suicide over armor
character_event = {
	id = tw.117
	picture = GFX_ajax_and_odysseus
	title = EVTTITLETW117
	desc = EVTDESCTW117
	is_triggered_only = yes

	option = {
		name = EVTOPTATW117
	}
}

#Helenus is tortured to reveal win condition 
character_event = {
	id = tw.51
	picture = GFX_menelaus_and_helen
	desc = EVTDESCTW51
	portrait = 2200018
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW51
		custom_tooltip = {
			text = EVTOPTATW51_TT
		}
		if = {
			limit = {
				has_landed_title = d_lacedemonia
			}
			any_playable_ruler = {
				limit = {
					any_war = {
						using_cb = trojan_war_cb
						any_attacker = {
							character = PREVPREV
						}
					}
				}
				character_event = { id = tw.93 } #Win condition revealed
			}
		}
	}
}

#Win condition revealed
character_event = {
	id = tw.93
	picture = GFX_patroclus_dies
	desc = EVTDESCTW93
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW93
	}
}

#Generic Trojan is tortured to reveal win condition 
character_event = {
	id = tw.52
	picture = GFX_patroclus_dies
	desc = EVTDESCTW52
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW52
		if = {
			limit = {
				has_landed_title = d_lacedemonia
			}
			any_playable_ruler = {
				limit = {
					any_war = {
						using_cb = trojan_war_cb
						any_attacker = {
							character = PREVPREV
						}
					}
				}
				character_event = { id = tw.93 } #Win condition revealed
			}
		}
	}
}

#Relevent people are sent to fetch the required items
character_event = {
	id = tw.53
	picture = GFX_philoktetes
	desc = EVTDESCTW53
	is_triggered_only = yes
	
	immediate = {
		random_independent_ruler = {
			limit = {
				has_artifact = palladium_troy
			}
			save_event_target_as = palladium_holder
		}
		random_independent_ruler = {
			limit = {
				has_artifact = bone_pelops
			}
			save_event_target_as = bone_holder
		}
	}
	
	option = {
		name = EVTOPTATW53
		event_target:bone_holder = {
			character_event = { id = tw.76 days = 3 } #Someone comes to take the Bones of Pelops
		}
		if = {
			limit = {
				OR = {
					c_2102300 = { #Odysseus
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
					c_2101200 = { #Diomedes
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
				}
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.54 } #Diomedes and Odysseus are sent to steal the Palladium
			}
			c_2101200 = { #Diomedes
				character_event = { id = tw.54 } #Diomedes and Odysseus are sent to steal the Palladium
			}
		}
		else = {
			character_event = { id = tw.55 } #Palladium retrieved
		}
	}
}

#Someone comes to take the Bones of Pelops
character_event = {
	id = tw.76
	picture = GFX_philoktetes
	desc = EVTDESCTW76
	is_triggered_only = yes
	option = {
		name = EVTOPTATW76
		FROM = {
			character_event = { id = tw.77 days = 4 } #Bones of Pelops retrieved
		}
	}
}

#Bones of Pelops retrieved
character_event = {
	id = tw.77
	picture = GFX_philoktetes
	desc = EVTDESCTW77
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW77
		event_target:bone_holder = {
			random_artifact = {
				limit = {
					has_artifact_flag = bone_pelops
				}
				transfer_artifact = {
					to = ROOT
					from = PREV
				}
			}
		}
	}
}

#Diomedes and Odysseus are sent to steal the Palladium
character_event = {
	id = tw.54
	picture = GFX_philoktetes
	desc = {
		trigger = {
			character = c_2102300 #Odysseus
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCATW54
	}	
	desc = {
		trigger = {
			character = c_2101200 #Diomedes
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCBTW54
	}	
	desc = {
		trigger = {
			character = c_2102300 #Odysseus
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCCTW54
	}	
	desc = {
		trigger = {
			character = c_2101200 #Diomedes
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCDTW54
	}	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW54
		if = {
			limit = {
				character = c_2101200 #Diomedes
			}
			event_target:palladium_holder = {
				random_artifact = {
					limit = {
						has_artifact_flag = palladium
					}
					transfer_artifact = {
						to = ROOT
						from = PREV
					}
				}
			}
			FROM = {
				character_event = { id = tw.55 } #Palladium retrieved
			}
		}
		else_if = {
			limit = {
				character = c_2102300 #Odysseus
				c_2101200 = { #Diomedes
					is_alive = no
				}
			}
			event_target:palladium_holder = {
				random_artifact = {
					limit = {
						has_artifact_flag = palladium
					}
					transfer_artifact = {
						to = ROOT
						from = PREV
					}
				}
			}
			FROM = {
				character_event = { id = tw.55 } #Palladium retrieved
			}
		}
	}
}

#Palladium retrieved
character_event = {
	id = tw.55
	picture = GFX_philoktetes
	desc = EVTDESCTW55
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW55
		event_target:palladium_holder = {
			if = {
				limit = {
					ROOT_FROM = {
						OR = {
							character = c_2101200 #Diomedes
						}
						OR = {
							character = c_2102300 #Odysseus
						}
					}
				}
				#Do nothing
			}
			else = {
				random_artifact = {
					limit = {
						has_artifact_flag = palladium
					}
					transfer_artifact = {
						to = ROOT
						from = PREV
					}
				}
			}
			character_event = { id = tw.56 } #Palladium stolen
		}
		if = {
			limit = {
				OR = {
					c_2101200 = { #Diomedes
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
					c_2102300 = { #Odysseus
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
				}
				c_2102600 = { #Philoktetes
					is_alive = yes
					is_incapable = no
				}
			}
			c_2101200 = { #Diomedes
				character_event = { id = tw.57 } #Diomedes and Odysseus go to retrieve Philoktetes
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.57 } #Diomedes and Odysseus go to retrieve Philoktetes
			}
		}
		else_if = {
			limit = {
				c_2102600 = { #Philoktetes
					is_alive = yes
					is_incapable = no
				}
				character_event = { id = tw.58 days = 1 } #Someone comes to retrieve Philoktetes
			}
		}
		else_if = {
			limit = {
				OR = {
					c_2101200 = { #Diomedes
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
					c_2102300 = { #Odysseus
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
				}
			}
			c_2101200 = { #Diomedes
				character_event = { id = tw.60 } #Diomedes and Odysseus go to retrieve Arrows of Heracles
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.60 } #Diomedes and Odysseus go to retrieve Arrows of Heracles
			}
		}
		else = {
			random_character = {
				limit = {
					has_artifact = arrow_heracles
				}
				set_character_flag = owns_arrows
				character_event = { id = tw.61 } #Someone comes to retrieve the Arrows
			}
		}
	}
}

#Palladium stolen
character_event = {
	id = tw.56
	picture = GFX_philoktetes
	desc = EVTDESCTW56
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW56
		piety = -50
	}
}

#Diomedes and Odysseus go to retrieve Philoktetes
character_event = {
	id = tw.57
	picture = GFX_philoktetes
	desc = EVTDESCTW57
	# desc = {
		# trigger = {
			# character = c_2102300 #Odysseus
			# c_2101200 = { #Diomedes
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCATW57
	# }	
	# desc = {
		# trigger = {
			# character = c_2101200 #Diomedes
			# c_2102300 = { #Odysseus
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCBTW57
	# }	
	# desc = {
		# trigger = {
			# character = c_2102300 #Odysseus
			# c_2101200 = { #Diomedes
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCCTW57
	# }	
	# desc = {
		# trigger = {
			# character = c_2101200 #Diomedes
			# c_2102300 = { #Odysseus
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCDTW57
	# }	
	portrait = 2102600
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW57
		if = {
			limit = {
				character = c_2101200 #Diomedes
			}
			c_2102600 = { #Philoktetes
				character_event = { id = tw.58 days = 1 } #Someone comes to retrieve Philoktetes
			}
		}
		else_if = {
			limit = {
				character = c_2102300 #Odysseus
				c_2101200 = { #Diomedes
					is_alive = no
				}
			}
			c_2102600 = { #Philoktetes
				character_event = { id = tw.58 days = 1 } #Someone comes to retrieve Philoktetes
			}
		}
	}
}

#Someone comes to retrieve Philoktetes
character_event = {
	id = tw.58
	picture = GFX_philoktetes
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCATW58
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCBTW58
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCCTW58
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCDTW58
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW58

		if = {
			limit = {
				AND = {
					trait = infection
					trait = travelling
				}
			}
			remove_trait = infection
			remove_trait = travelling
		}
		FROMFROM = {
			character_event = { id = tw.59 days = 2 } #Arrows come to Troy
		}
	}
}

#Arrows come to Troy
character_event = {
	id = tw.59
	picture = GFX_philoktetes
	desc = {
		trigger = {
			c_2102600 = { #Philoktetes
				is_alive = yes
			}
		}
		text = EVTDESCATW59
	}
	desc = {
		trigger = {
			c_2102600 = { #Philoktetes
				is_alive = no
			}
		}
		text = EVTDESCBTW59
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW59
		set_global_flag = arrows_in_troy
		set_character_flag = borrowed_arrows
		if = {
			limit = {
				OR = {
					c_2101200 = { #Diomedes
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
					c_2102300 = { #Odysseus
						is_alive = yes
						is_incapable = no
						prisoner = no
					}
				}
				c_2102102 = { #Pyrrhus
					is_alive = yes
					is_incapable = no
					prisoner = no
				}
			}
			c_2101200 = { #Diomedes
				character_event = { id = tw.62 } #Diomedes and Odysseus go to retrieve Pyrrhus
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.62 } #Diomedes and Odysseus go to retrieve Pyrrhus
			}
		}
		else_if = {
			limit = {
				c_2102102 = { #Pyrrhus
					is_alive = yes
					is_incapable = no
					prisoner = no
				}
				character_event = { id = tw.63 days = 1 } #Someone comes to retrieve Pyrrhus
			}
		}
		if = {
			limit = {
				c_2102300 = { #Odysseus
					is_alive = yes
					is_incapable = no
					prisoner = no
				}
				c_2102102 = { #Pyrrhus
					OR = {
						is_alive = no
						is_incapable = yes
						prisoner = yes
					}
				}
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.66 days = 7 } #Odysseus formulates the Trojan Horse
			}
		}
		else_if = {
			limit = {
				c_2102300 = { #Odysseus
					OR = {
						is_alive = no
						is_incapable = yes
						prisoner = yes
					}
				}
			}
			random_character = {
				limit = {
					top_liege = {
						any_war = {
							using_cb = trojan_war_cb
							any_attacker = {
								character = PREVPREV
							}
						}
					}
					in_command = yes
				}
				character_event = { id = tw.66 days = 7 } #Odysseus formulates the Trojan Horse
			}
		}
	}
}

#Diomedes and Odysseus go to retrieve Arrows of Heracles
character_event = {
	id = tw.60
	picture = GFX_philoktetes
	desc = EVTDESCTW60
	# desc = {
		# trigger = {
			# character = c_2102300 #Odysseus
			# c_2101200 = { #Diomedes
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCATW60
	# }	
	# desc = {
		# trigger = {
			# character = c_2101200 #Diomedes
			# c_2102300 = { #Odysseus
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCBTW60
	# }	
	# desc = {
		# trigger = {
			# character = c_2102300 #Odysseus
			# c_2101200 = { #Diomedes
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCCTW60
	# }	
	# desc = {
		# trigger = {
			# character = c_2101200 #Diomedes
			# c_2102300 = { #Odysseus
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCDTW60
	# }	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW60
		if = {
			limit = {
				character = c_2101200 #Diomedes
			}
			random_character = {
				limit = {
					has_artifact = arrow_heracles
				}
				save_event_target_as = holder_of_arrows
				character_event = { id = tw.61 days = 1 } #Someone comes to retrieve the Arrows
			}
		}
		else_if = {
			limit = {
				character = c_2102300 #Odysseus
				c_2101200 = { #Diomedes
					is_alive = no
				}
			}
			random_character = {
				limit = {
					has_artifact = arrow_heracles
				}
				save_event_target_as = holder_of_arrows
				character_event = { id = tw.61 days = 1 } #Someone comes to retrieve the Arrows
			}
		}
	}
}

#Someone comes to retrieve the Arrows
character_event = {
	id = tw.61
	picture = GFX_philoktetes
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCATW61
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCBTW61
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCCTW61
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCDTW61
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW61
		custom_tooltip = {
			text = EVTOPTATW61_TT
		}
		FROMFROM = {
			character_event = { id = tw.59 days = 2 } #Arrows come to Troy
		}
		random_artifact = {
			limit = {
				has_artifact_flag = arrow_heracles
			}
			transfer_artifact = {
				to = FROMFROM
				from = ROOT
			}
		}
	}
}

#Diomedes and Odysseus go to retrieve Pyrrhus
character_event = {
	id = tw.62
	picture = GFX_philoktetes
	desc = EVTDESCTW62
	# desc = {
		# trigger = {
			# character = c_2102300 #Odysseus
			# c_2101200 = { #Diomedes
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCATW62
	# }	
	# desc = {
		# trigger = {
			# character = c_2101200 #Diomedes
			# c_2102300 = { #Odysseus
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCBTW62
	# }	
	# desc = {
		# trigger = {
			# character = c_2102300 #Odysseus
			# c_2101200 = { #Diomedes
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCCTW62
	# }	
	# desc = {
		# trigger = {
			# character = c_2101200 #Diomedes
			# c_2102300 = { #Odysseus
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCDTW62
	# }	
	portrait = 2102102
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW62
		if = {
			limit = {
				character = c_2101200 #Diomedes
			}
			c_2102102 = { #Pyrrhus
				character_event = { id = tw.63 days = 2 } #Someone comes to retrieve Philoktetes
			}
		}
		else_if = {
			limit = {
				character = c_2102300 #Odysseus
				c_2101200 = { #Diomedes
					is_alive = no
				}
			}
			c_2102102 = { #Pyrrhus
				character_event = { id = tw.63 days = 2 } #Someone comes to retrieve Philoktetes
			}
		}
	}
}

#Someone comes to retrieve Pyrrhus
character_event = {
	id = tw.63
	picture = GFX_philoktetes
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCATW63
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCBTW63
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
				prisoner = yes
				}
			}
			c_2102300 = { #Odysseus
				is_alive = yes
				is_incapable = no
				prisoner = no
			}
		}
		text = EVTDESCCTW63
	}
	desc = {
		trigger = {
			c_2101200 = { #Diomedes
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
			c_2102300 = { #Odysseus
				OR = {
					is_alive = no
					is_incapable = yes
					prisoner = yes
				}
			}
		}
		text = EVTDESCDTW63
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW63
		liege = {
			random_courtier_or_vassal = {
				remove_title = title_commander
			}
		}
		unsafe_give_minor_title = title_commander
		FROMFROM = {
			character_event = { id = tw.64 days = 2 } #Pyrrhus come to Troy
		}
	}
}

#Pyrrhus comes to Troy
character_event = {
	id = tw.64
	picture = GFX_philoktetes
	desc = EVTDESCTW64
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW64
		if = {
			limit = {
				c_2102300 = { #Odysseus
					is_alive = yes
					is_incapable = no
					prisoner = no
				}
			}
			c_2102300 = { #Odysseus
				character_event = { id = tw.66 days = 7 } #Odysseus formulates the Trojan Horse
			}
		}
		else_if = {
			limit = {
				c_2102300 = { #Odysseus
					OR = {
						is_alive = no
						is_incapable = yes
						prisoner = yes
					}
				}
			}
			random_character = {
				limit = {
					top_liege = {
						any_war = {
							using_cb = trojan_war_cb
							any_attacker = {
								character = PREVPREV
							}
						}
					}
					in_command = yes
				}
				character_event = { id = tw.66 days = 7 } #Odysseus formulates the Trojan Horse
			}
		}
	}
}

#Paris is killed by an Arrow of Heracles
character_event = {
	id = tw.65
	picture = GFX_death_of_paris
	desc = EVTDESCTW65
	# desc = {
		# trigger = {
			# c_2102600 = { #Philoktetes
				# is_alive = yes
				# is_incapable = no
				# prisoner = no
			# }
		# }
		# text = EVTDESCATW65
	# }	
	# desc = {
		# trigger = {
			# c_2102600 = { #Philoktetes
				# OR = {
					# is_alive = no
					# is_incapable = yes
					# prisoner = yes
				# }
			# }
		# }
		# text = EVTDESCBTW65
	# }	
	trigger = {
		had_global_flag = {
			flag = arrows_in_troy
			days = 1
		}
		character = c_2200004 #Paris
		top_liege = {
			any_war = {
				using_cb = trojan_war_cb
				any_defender = {
					character = PREVPREV
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = EVTOPTATW65
		if = {
			limit = {
				c_2102600 = { #Philoktetes
					is_alive = yes
				}
			}
			death = {
				death_reason = death_battle
				killer = c_2102600
			}
		}
		else = {
			death = {
				death_reason = death_battle
			}
		}
	}
}

#Odysseus/Someone formulates the Trojan Horse
character_event = {
	id = tw.66
	picture = GFX_trojan_horse
	desc = EVTDESCTW66
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW66
		FROM = {
			character_event = { id = tw.67 } #Plans are received, and the building of the Trojan Horse commences
		}
	}
}

#Plans are received, and the building of the Trojan Horse commences
character_event = {
	id = tw.67
	picture = GFX_trojan_horse
	title = EVTTITLETW67
	desc = EVTDESCTW67
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW67
		character_event = { id = tw.68 days = 3 } #Trojan Horse complete
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = PREVPREV
					}
				}
			}
			character_event = { id = tw.94 } #Trojan Horse under construction
			character_event = { id = tw.95 } #Trojan Horse complete
		}
	}
}

#Trojan Horse under construction
character_event = {
	id = tw.94
	picture = GFX_trojan_horse
	desc = EVTDESCTW94
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW94
	}
}

#Trojan Horse complete
character_event = {
	id = tw.95
	picture = GFX_trojan_horse
	desc = EVTDESCTW95
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW95
	}
}

#Trojan Horse complete (Agamemnon)
character_event = {
	id = tw.68
	picture = GFX_trojan_horse
	title = EVTTITLETW68
	desc = EVTDESCTW68
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW68
		custom_tooltip = {
			text = EVTOPTATW68_TT
		}
		c_truwisa = {
			owner = {
				character_event = { id = tw.69 } #Trojan Horse is presented
			}
		}
	}
}

#Trojan Horse is presented
character_event = {
	id = tw.69
	picture = GFX_trojan_horse
	title = EVTTITLETW69
	desc = EVTDESCTW69
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW69
		if = {
			limit = {
				c_2200106 = { #Laocoon
					is_alive = yes
				}
			}
			c_2200106 = { #Laocoon
				character_event = { id = tw.70 } #Laokoon is suspicious
			}
		} 
		else = {
			hidden_tooltip = {
				161 = { #Troy
					remove_province_modifier = trojan_walls
				}
				any_playable_ruler = {
					limit = {
						any_war = {
							using_cb = trojan_war_cb
							any_attacker = {
								character = PREVPREV
							}
						}
						at_location = 161 #Troy
					}
					character_event = { id = tw.72 } #Achaeans leap out of the Trojan Horse
				}
			}
		}
	}
	after = {
		if = {
			limit = {
				c_2200106 = { #Laocoon
					is_alive = yes
				}
			}
			hidden_tooltip = {
				e_hellenic_pantheon = {
					owner = {
						character_event = { id = tw.73 } #Sack of Troy set-up
					}
				}
			}
		}
	}
}

#Laocoon is suspicious
character_event = {
	id = tw.70
	picture = GFX_trojan_horse
	title = EVTTITLETW70
	desc = EVTDESCTW70
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW70
		FROM = {
			long_character_event = { id = tw.71 } #Laocoon warns of the Trojan Horse
		} 
	}
	option = {
		trigger = {
			ai = no
		}
		name = EVTOPTBTW70
		custom_tooltip = {
			text = EVTOPTBTW70_TT
		}
	}
}

#Laocoon warns of the Trojan Horse
long_character_event = {
	id = tw.71
	picture = GFX_trojan_horse
	title = EVTTITLETW71
	desc = EVTDESCTW71
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW71
		FROM = {
			death = {
				death_reason = death_murder
				killer = c_1100145
			}
		}
		hidden_tooltip = {
			161 = { #Troy
				remove_province_modifier = trojan_walls
			}
			any_playable_ruler = {
				limit = {
					any_war = {
						using_cb = trojan_war_cb
						any_attacker = {
							character = PREVPREV
						}
					}
					at_location = 161 #Troy
				}
				character_event = { id = tw.72 } #Achaeans leap out of the Trojan Horse
			}
		}
	}
	after = {
		hidden_tooltip = {
			e_hellenic_pantheon = {
				owner = {
					character_event = { id = tw.73 } #Sack of Troy set-up
				}
			}
		}
	}
}

#Achaeans leap out of the Trojan Horse
character_event = {
	id = tw.72
	picture = GFX_troy_sacked
	title = EVTTITLETW72
	desc = EVTDESCTW72
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW72
		b_wilusa = {
			remove_building = ca_wall_1
			remove_building = ca_wall_2
			remove_building = ca_wall_3
			remove_building = ca_wall_4
			remove_building = ca_wall_5
			remove_building = ca_wall_q_1
			remove_building = ca_wall_q_2
			remove_building = ca_wall_q_3
			remove_building = ca_con_wall_6
		}	
	}
}

#Sack of Troy set-up
character_event = {
	id = tw.73
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = end_of_trojan_war
		if = {
			limit = {
				c_2101000 = { #Menelaos
					at_location = 161 #Troy
				}
				c_2101002 = { #Helen
					is_alive = yes
				}
			}
			c_2101000 = { #Menelaos
				long_character_event = { id = tw.75 } #Helen and Menelaos reunite
			}
		}
		else_if = {
			limit = {
				c_2101000 = { #Menelaos
					is_alive = yes
				}
				c_2101002 = { #Helen
					is_alive = yes
				}
			}
			c_2101000 = { #Menelaos
				long_character_event = { id = tw.75 days = 7 } #Helen and Menelaos reunite
			}
		}
		any_playable_ruler = {
			character_event = { id = tw.74 } #Destruction of Troy
		}
		if = {
			limit = {
				c_2102102 = { #Pyrrhus
					is_alive = yes
				}
				c_2200000 = { #Pariya-muwas
					is_alive = yes
				}
			}
			c_2102102 = { #Pyrrhus
				character_event = { id = tw.78 } #Pyrrhus finds and kills Priam
			}
		}
		else_if = {
			limit = {
				c_2102102 = { #Pyrrhus
					is_alive = yes
				}
			}
			c_2102102 = { #Pyrrhus
				long_character_event = { id = tw.82 } #Pyrrhus is contacted by Achilles' ghost to kill Polyxena
			}
			d_wilusa = {
				owner = {
					character_event = { id = tw.118 } #Achaeans slay the Trojan princes
				}
			}
		}
		else = {
			d_wilusa = {
				owner = {
					character_event = { id = tw.118 } #Achaeans slay the Trojan princes
				}
			}
		}
		if = {
			limit = {
				c_2102101 = { #Achilles
					is_alive = no
				}
				any_character = {
					limit = {
						father_even_if_dead = {
							character = c_2200000
						}
						is_female = no
					}
					character_event = { id = tw.118 } #Achaeans slay the Trojan princes
				}
			}
		}
		c_2102000 = { #Ajax the Lesser
			character_event = { id = tw.80 } #Ajax the Lesser spots Cassandra
		}
	}	
}

#Sack of Troy
narrative_event = {
	id = tw.74
	picture = GFX_troy_sacked
	title = EVTTITLETW74
	hide_from = yes
	desc = {
		trigger = {
			any_war = {
				using_cb = trojan_war_cb
				any_attacker = {
					character = ROOT
				}
			}
		}
		text = EVTDESCATW74
	}
	desc = {
		trigger = {
			any_war = {
				using_cb = trojan_war_cb
				any_defender = {
					character = ROOT
				}
			}
		}
		text = EVTDESCBTW74
	}
	desc = {
		trigger = {
			NOR = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = ROOT
					}
				}
				any_war = {
					using_cb = trojan_war_cb
					any_defender = {
						character = ROOT
					}
				}
			}
		}
		text = EVTDESCCTW74
	}
	
	immediate = {
		remove_character_modifier = trojan_war_wealth
	}
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = ROOT
					}
				}
			}
			text = EVTOPTAATW74
		}
		name = {
			trigger = {
				any_war = {
					using_cb = trojan_war_cb
					any_defender = {
						character = ROOT
					}
				}
			}
			text = EVTOPTABTW74
		}
		name = {
			trigger = {
				NOR = {
					any_war = {
						using_cb = trojan_war_cb
						any_attacker = {
							character = ROOT
						}
					}
					any_war = {
						using_cb = trojan_war_cb
						any_defender = {
							character = ROOT
						}
					}
				}
			}
			text = EVTOPTACTW74
		}
		if = {
			limit = {
				top_liege = {
					any_war = {
						using_cb = trojan_war_cb
						any_attacker = {
							character = PREVPREV
						}
					}
				}
				at_location = 161 #Troy
			}
			wealth = 300
		}
	}
	after = {
		if = {
			limit = {
				character = c_2101000 #Menelaos
				c_2101002 = { #Helen
					is_alive = no
				}
			}
			any_war = {
				limit = {
					using_cb = trojan_war_cb
				}
				end_war = success
			}
		}
		random_character = {
			limit = {
				has_artifact = arrow_heracles
				has_character_flag = borrowed_arrows
			}
			character_event = { id = tw.105 } #Arrows of Heracles are sent back
		}
	}
}

#Helen and Menelaos reunite
long_character_event = {
	id = tw.75
	picture = GFX_menelaus_and_helen
	title = EVTTITLETW75
	hide_from = yes
	desc = {
		trigger = {
			at_location = 161 #Troy
		}
		text = EVTDESCATW75
	}
	desc = {
		trigger = {
			NOT = {
				at_location = 161 #Troy
			}
		}
		text = EVTDESCBTW75
	}
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW75
		add_trait = kind
		remove_trait = wroth
		add_lover = c_2101002 #Helen
		any_war = {
			limit = {
				using_cb = trojan_war_cb
			}
			end_war = success
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		name = EVTOPTBTW75
		add_trait = wroth
		remove_trait = kind
		any_war = {
			limit = {
				using_cb = trojan_war_cb
			}
			end_war = success
		}
		ai_chance = {
			factor = 50
		}
	}
}

#Pyrrhus finds Priam
character_event = {
	id = tw.78
	picture = GFX_achilles_duels_hector
	desc = EVTDESCTW78
	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		c_2200000 = { #Pariya-muwas
			is_alive = yes
			at_location = 161 #Troy
		}
		at_location = 161 #Troy
	}
	
	option = {
		name = EVTOPTATW78
		c_2200000 = { #Pariya-muwas
			character_event = { id = tw.79 } #Priam is killed
		} 
	}
}

#Priam is killed
character_event = {
	id = tw.79
	picture = GFX_achilles_duels_hector
	desc = EVTDESCTW79
	is_triggered_only = yes

	option = {
		name = EVTOPTATW79
		death = {
			death_reason = death_battle
			killer = FROM
		}
		if = {
			limit = {
				FROM = {
					has_global_flag = achilles_will_die
				}
			}
			FROM = {
				long_character_event = { id = tw.82 } #Pyrrhus is contacted by Achilles' ghost to kill Polyxena
			}
		}
	}
}

#Ajax the Lesser spots Cassandra
long_character_event = {
	id = tw.80
	picture = GFX_menelaus_and_helen
	desc = EVTDESCTW80
	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		c_2200017 = { #Kassandra
			is_alive = yes
			at_location = 161 #Troy
		}
		at_location = 161 #Troy
	}
	
	option = {
		name = EVTOPTATW80
		prestige = -100
		piety = -100
		any_character = {
			limit = {
				religion_group = hellenic
			}
			opinion = {
				modifier = opinion_defiled_priestess
				who = ROOT
			}
		}
		c_2200017 = { #Kassandra
			character_event = { id = tw.81 } #Cassandra is raped
		} 
	}
	option = {
		trigger = {
			ai = no
		}
		name = EVTOPTBTW80
	}
}

#Cassandra is raped
character_event = {
	id = tw.81
	picture = GFX_menelaus_and_helen
	desc = EVTDESCTW81
	is_triggered_only = yes

	option = {
		name = EVTOPTATW81
		random = {
			chance = 50
			impregnate = ROOT
		}
	}
}

#Pyrrhus is contacted by Achilles' ghost to kill Polyxena
long_character_event = {
	id = tw.82
	picture = GFX_patroclus_dies
	desc = EVTDESCTW82
	is_triggered_only = yes
	trigger = {
		c_2200020 = {
			is_alive = yes
		}
	}

	option = {
		name = EVTOPTATW82
		c_2200020 = {
			character_event = { id = tw.83 } #Polyxena is captured
		}
	}
	
	option = {
		trigger = {
			ai = no
		}
		name = EVTOPTBTW82
	}
}

#Polyxena is captured
character_event = {
	id = tw.83
	picture = GFX_patroclus_dies
	desc = EVTDESCTW83
	is_triggered_only = yes

	option = {
		name = EVTOPTATW83
		imprison = FROM
		FROM = {
			long_character_event = { id = tw.84 days = 7 } #Polyxena is taken to Achilles' grave to be slaughtered
		}
	}
}

#Polyxena is taken to Achilles' grave to be slaughtered
long_character_event = {
	id = tw.84
	picture = GFX_death_of_achilles
	desc = EVTDESCTW84
	is_triggered_only = yes

	option = {
		name = EVTOPTATW84
		FROM = {
			death = {
				death_reason = death_sacrificed 
				killer = ROOT
			}
		}
		any_character = {
			limit = {
				OR = {
					religion = assussani
					character = c_2100900
				}
			}
			opinion = {
				modifier = opinion_sacrificed_human
				who = ROOT
			}
		}
	}
}

#Death of Helen set-up (on_death)
character_event = {
	id = tw.96
	hide_window = yes
	is_triggered_only = yes 
	
	trigger = {
		character = c_2101002 #Helen
		any_spouse = {
			any_war = {
				using_cb = trojan_war_cb
			}
		}
	}
	
	immediate = {
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
				}
			}
			narrative_event = { id = tw.97 } #Death of Helen
		}
	}
}

#Death of Helen
narrative_event = {
	id = tw.97
	picture = GFX_death_of_paris
	title = EVTTITLETW97
	desc = EVTDESCTW97
	is_triggered_only = yes 

	option = {
		name = {
			trigger = {
				NOT = {
					character = c_2101000 #Menelaos
				}
			}
			text = EVTOPTAATW97
		}
		name = {
			trigger = {
				character = c_2101000 #Menelaos
			}
			text = EVTOPTABTW97
		}
				
	}
	option = {
		trigger = {
			character = c_2101000 #Menelaos
		}
		name = EVTOPTBTW97
		any_playable_ruler = {
			narrative_event = { id = tw.98 } #End of the Trojan War, Death of Helen
		}
		any_war = {
			limit = {
				using_cb = trojan_war_cb
			}
			end_war = whitepeace
		}
	}
}

#End of the Trojan War, Death of Helen
narrative_event = {
	id = tw.98
	picture = GFX_death_of_paris
	title = EVTTITLETW98
	hide_from = yes
	desc = EVTDESCTW98
	is_triggered_only = yes
	
	immediate = {
		remove_character_modifier = trojan_war_wealth
	}
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW98
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW98
		}
		name = {
			trigger = {
				NOR = {
					has_character_flag = flag_achaean
					has_character_flag = flag_trojan
				}
			}
			text = EVTOPTACTW98
		}
	}
	after = {
		if = {
			limit = {
				c_2102101 = { #Achilles
					at_location = 161 #Troy
				}
			}
			c_2102101 = { #Akhilleus
				character_event = { id = tw.107 } #Akhilleus dies in battle with Trojan Princes
			}
		}
		else_if = {
			limit = {
			c_2102101 = { #Achilles
					NOT = {
						at_location = 161 #Troy
					}
				}
			}
			c_2102101 = { #Akhilleus
				character_event = { id = tw.109 } #Akhilleus dies in battle with Apollo
			}
		}
		random_character = {
			limit = {
				has_artifact = arrow_heracles
				has_character_flag = borrowed_arrows
			}
			character_event = { id = tw.105 } #Arrows of Heracles are sent back
		}
	}
}

#End of the Trojan War, Troy Stands
narrative_event = {
	id = tw.99
	picture = GFX_iolaos_become_protesilaos
	title = EVTTITLETW99
	hide_from = yes
	desc = EVTDESCTW99
	is_triggered_only = yes
	
	immediate = {
		remove_character_modifier = trojan_war_wealth
	}
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW99
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW99
		}
		name = {
			trigger = {
				NOR = {
					has_character_flag = flag_achaean
					has_character_flag = flag_trojan
				}
			}
			text = EVTOPTACTW99
		}
	}
	after = {
		if = {
			limit = {
				c_2102101 = { #Achilles
					at_location = 161 #Troy
				}
			}
			c_2102101 = { #Akhilleus
				character_event = { id = tw.107 } #Akhilleus dies in battle with Trojan Princes
			}
		}
		else_if = {
			limit = {
			c_2102101 = { #Achilles
					NOT = {
						at_location = 161 #Troy
					}
				}
			}
			c_2102101 = { #Akhilleus
				character_event = { id = tw.109 } #Akhilleus dies in battle with Apollo
			}
		}
		random_character = {
			limit = {
				has_artifact = arrow_heracles
				has_character_flag = borrowed_arrows
			}
			character_event = { id = tw.105 } #Arrows of Heracles are sent back
		}
	}
}

#End of the Trojan War, Troy Wins
narrative_event = {
	id = tw.100
	picture = GFX_patroclus_dies
	title = EVTTITLETW100
	hide_from = yes
	desc = EVTDESCTW100
	is_triggered_only = yes
	
	immediate = {
		remove_character_modifier = trojan_war_wealth
	}
	
	option = {
		name = {
			trigger = {
				has_character_flag = flag_achaean
			}
			text = EVTOPTAATW100
		}
		name = {
			trigger = {
				has_character_flag = flag_trojan
			}
			text = EVTOPTABTW100
		}
		name = {
			trigger = {
				NOR = {
					has_character_flag = flag_achaean
					has_character_flag = flag_trojan
				}
			}
			text = EVTOPTACTW100
		}
	}
	after = {
		if = {
			limit = {
				c_2102101 = { #Achilles
					at_location = 161 #Troy
				}
			}
			c_2102101 = { #Akhilleus
				character_event = { id = tw.107 } #Akhilleus dies in battle with Trojan Princes
			}
		}
		else_if = {
			limit = {
			c_2102101 = { #Achilles
					NOT = {
						at_location = 161 #Troy
					}
				}
			}
			c_2102101 = { #Akhilleus
				character_event = { id = tw.109 } #Akhilleus dies in battle with Apollo
			}
		}
		random_character = {
			limit = {
				has_artifact = arrow_heracles
				has_character_flag = borrowed_arrows
			}
			character_event = { id = tw.105 } #Arrows of Heracles are sent back
		}
	}
}

#Akhilleus dies in battle with Trojan Princes
character_event = {
	id = tw.107
	picture = GFX_death_of_achilles
	desc = EVTDESCTW107
	is_triggered_only = yes

	option = {
		name = EVTOPTATW107
		c_2200002 = { #Hector
			character_event = { id = tw.108 } #Killed by Achilles in the Siege
		}
		c_2200004 = { #Paris
			character_event = { id = tw.108 } #Killed by Achilles in the Siege
		}
	}
	after = {
		death = {
			death_reason = death_battle
		}
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.92 } #Death of Achilles
		}
	}
}

#Killed by Achilles in the Siege
character_event = {
	id = tw.108
	picture = GFX_death_of_achilles
	desc = EVTDESCTW108
	is_triggered_only = yes

	option = {
		name = EVTOPTATW108
		if = {
			limit = {
				character = c_2200002 #Hector
			}
			any_playable_ruler = {
				limit = {
					any_war = {
						using_cb = trojan_war_cb
						# any_attacker = {
							# character = PREVPREV
						# }
					}
				}
				narrative_event = { id = tw.91 } #Death of Hector
			}
		}
	}
}

#Akhilleus dies in battle with Apollo
character_event = {
	id = tw.109
	picture = GFX_death_of_achilles
	desc = EVTDESCTW109
	portrait = 1100149
	is_triggered_only = yes

	option = {
		name = EVTOPTATW109
		death = {
			death_reason = death_battle
			killer = c_1100149
		}
	}
	after = {
		any_playable_ruler = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					# any_attacker = {
						# character = PREVPREV
					# }
				}
			}
			character_event = { id = tw.92 } #Death of Achilles
		}
	}
}

#Achaeans slay Trojan Princes
character_event = {
	id = tw.118
	picture = GFX_patroclus_dies
	desc = {
		trigger = {
			has_landed_title = d_wilusa
		}
		text = EVTDESCATW118
	}
	desc = {
		trigger = {
			NOT = {
				has_landed_title = d_wilusa
			}
		}
		text = EVTDESCBTW118
	}
	
	is_triggered_only = yes

	option = {
		name = EVTOPTATW118
		death = {
			death_reason = death_battle
		}
	}
}

# **************************Other Trojan War Events***********************

#Diomedes sees Glaukos
character_event = {
	id = tw.101
	picture = GFX_diomedes_sees_glaukos
	desc = EVTDESCTW101
	
	trigger = {
		character = c_2101200 #Diomedes
		top_liege = {
			any_war = {
				using_cb = trojan_war_cb
				any_attacker = {
					character = PREVPREV
				}
			}
		}
		c_2201100 = { #Glaukos
			is_alive = yes
			at_location = c_2101200
			top_liege = {
				any_war = {
					using_cb = trojan_war_cb
					any_defender = {
						character = PREVPREV
					}
				}
			}
		}
		NOT = {
			has_global_flag = diomedes_met_glaucus
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = diomedes_met_glaucus
	}
	
	option = {
		name = EVTOPTATW101
		c_2201100 = { #Glaukos
			character_event = { id = tw.102 } #Glaukos is approached by Diomedes
		}
	}
	option = {
		name = EVTOPTBTW101
		trigger = {
			ai = no
		}
	}
}

#Glaukos is approached by Diomedes
character_event = {
	id = tw.102
	picture = GFX_diomedes_sees_glaukos
	desc = EVTDESCTW102
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW102
		custom_tooltip = {
			text = EVTOPTATW102_TT
		}
		FROM = {
			character_event = { id = tw.103 } #Glaukos and Diomedes exchange armor
		}
	}
	option = {
		name = EVTOPTBTW102
		trigger = {
			ai = no
		}
		FROM = {
			character_event = { id = tw.104 } #Glaukos turns Diomedes away
		}
	}
}

#Glaukos and Diomedes exchange armor
character_event = {
	id = tw.103
	picture = GFX_diomedes_sees_glaukos
	desc = EVTDESCTW103
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW103
		FROM = {
			random_artifact = {
				limit = {
					has_artifact_flag = glaucus
				}
				transfer_artifact = {
					to = ROOT
					from = FROM
				}
			}
		}
		random_artifact = {
			limit = {
				has_artifact_flag = diomedes
			}
			transfer_artifact = {
				to = FROM
				from = ROOT
			}
		}
	}
}

#Glaukos turns Diomedes away
character_event = {
	id = tw.104
	picture = GFX_diomedes_sees_glaukos
	desc = EVTDESCTW104
	is_triggered_only = yes
	
	option = {
		name = EVTOPTATW104
	}
}

#Arrows of Heracles and Bones of Pelops are sent back
character_event = {
	id = tw.105
	picture = GFX_philoktetes
	desc = EVTDESCTW105
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = arrow_heracles
			}
			save_event_target_as = event_target_arrow_heracles
		}
		random_artifact = {
			limit = {
				has_artifact_flag = bone_pelops
			}
			save_event_target_as = event_target_bone_pelops
		}
	}
	
	option = {
		name = EVTOPTATW105
		c_olympia = {
			owner = {
				save_event_target_as = holder_olympia
			}
		}
		event_target:event_target_bone_pelops = {
			transfer_artifact = {
				to = event_target:holder_olympia
				from = ROOT
			}
		}
		if = {
			limit = {
				event_target:event_target_arrow_heracles = {
					previous_artifact_owner = {
						is_alive = yes
					}
				}
			}
			event_target:event_target_arrow_heracles = {
				transfer_artifact = {
					to = previous_artifact_owner
					from = ROOT
				}
			}
		}
		else = {
			c_meliboia = {
				owner = {
					save_event_target_as = holder_meliboia
				}
			}
			event_target:event_target_arrow_heracles = {
				transfer_artifact = {
					to = event_target:holder_meliboia
					from = ROOT
				}
			}
		}
	}
}

#Helen is released if ever imprisoned during war
character_event = {
	id = tw.106
	picture = GFX_menelaus_and_helen
	hide_window = yes
	trigger = {
		character = c_2101002 #Helen
		prisoner = yes
		spouse = {
			any_war = {
				using_cb = trojan_war_cb
				any_attacker = {
					character = PREVPREV
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		imprison = no
		move_character = c_2200000 #Pariya-muwas
	}
}

#Successors join war set-up (on_death)
character_event = {
	id = tw.110
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_war = {
			using_cb = trojan_war_cb
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_attacker = {
						character = PREVPREV
					}
				}
			}
			any_war = {
				limit = {
					using_cb = trojan_war_cb
				}
				attacker = {
					save_event_target_as = trojan_war_leader
				}
			}
		}
		else_if = {
			limit = {
				any_war = {
					using_cb = trojan_war_cb
					any_defender = {
						character = PREVPREV
					}
				}
			}
			any_war = {
				limit = {
					using_cb = trojan_war_cb
				}
				defender = {
					save_event_target_as = trojan_war_leader
				}
			}
		}
		any_demesne_title = {
			limit = {
				higher_real_tier_than = BARON
			}
			current_heir = {
				if = {
					limit = {
						ROOT = {
							any_war = {
								using_cb = trojan_war_cb
								any_attacker = {
									character = PREVPREV
								}
							}
						}
					}
					set_character_flag = flag_achaean
				}
				else_if = {
					limit = {
						ROOT = {
							any_war = {
								using_cb = trojan_war_cb
								any_defender = {
									character = PREVPREV
								}
							}
						}
					}
					set_character_flag = flag_trojan
				}
				character_event = { id = tw.111 days = 1 } #Successors join war
			}
		}
	}
}

#Successors join war
character_event = {
	id = tw.111
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		add_character_modifier = {
			modifier = trojan_war_wealth
			duration = -1
			hidden = yes
		}
		if = {
			limit = {
				has_character_flag = flag_achaean
			}
			join_attacker_wars = event_target:trojan_war_leader
		}
		else_if = {
			limit = {
				has_character_flag = flag_trojan
			}
			join_defender_wars = event_target:trojan_war_leader
		}
	}
}

#The Murmidones title is destroyed (on_death)
character_event = {
	id = tw.116
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_landed_title = d_murmidones
	}
	
	immediate = {
		c_lamia = {
			owner = {
				save_event_target_as = lamia_holder
			}
		}
		any_courtier = {
			move_character = event_target:lamia_holder
		}
		unsafe_destroy_landed_title = d_murmidones
	}
}
